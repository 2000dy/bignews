"use strict";(self["webpackChunkvue_event"]=self["webpackChunkvue_event"]||[]).push([[367],{367:function(e,t,a){a.r(t),a.d(t,{default:function(){return d}});var s=function(){var e=this,t=e._self._c;return t("div",[t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix header-box",attrs:{slot:"header"},slot:"header"},[t("span",{staticClass:"title"},[e._v("文章类别")]),t("el-button",{staticStyle:{float:"right",padding:"10px 10px"},attrs:{type:"primary"},on:{click:e.addCateShowDialog}},[e._v("新增分类")])],1),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[t("el-table-column",{attrs:{prop:"cate_name",span:5,label:"分类名称"}}),t("el-table-column",{attrs:{prop:"cate_alias",span:1,label:"分类别名"}}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.edit(a.row)}}},[e._v("编辑")]),t("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(t){return e.deleteCate(a.row)}}},[e._v("删除")])]}}])})],1)],1),t("el-dialog",{attrs:{title:e.isEdit?"修改":"新增",visible:e.centerDialogVisible,width:"30%",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t},closed:e.onAddClosedFn}},[t("el-form",{ref:"addForm",attrs:{model:e.cate,"label-width":"70px",rules:e.rules}},[t("el-form-item",{attrs:{label:"分类名称",prop:"cate_name"}},[t("el-input",{model:{value:e.cate.cate_name,callback:function(t){e.$set(e.cate,"cate_name",t)},expression:"cate.cate_name"}})],1),t("el-form-item",{attrs:{label:"分类别名",prop:"cate_alias"}},[t("el-input",{model:{value:e.cate.cate_alias,callback:function(t){e.$set(e.cate,"cate_alias",t)},expression:"cate.cate_alias"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"success"},on:{click:function(t){return e.addArt("addForm")}}},[e._v("确认")]),t("el-button",{attrs:{type:"info"},on:{click:function(t){return e.reset("addForm")}}},[e._v("重置")])],1)],1)],1)},i=[],r=a(7877),l={name:"artCate",data(){return{tableData:[],centerDialogVisible:!1,cate:{id:"",cate_name:"",cate_alias:""},rules:{cate_name:[{required:!0,message:"请输入分类名称",trigger:"blur"},{pattern:/^[\u4E00-\u9FA5A-Za-z0-9_]{1,10}$/,message:"长度在 1 到 10 个字符",trigger:"blur"}],cate_alias:[{required:!0,message:"请输入分类别名",trigger:"blur"},{pattern:/^[a-zA-Z0-9]{1,15}$/,message:"长度在1到15的字母数字",trigger:"blur"}]},isEdit:!1,editId:""}},methods:{async getArt(){const{data:e}=await(0,r.Kp)();if(console.log("文章列表",e),0!==e.code)return this.$message.error(e.message);this.tableData=e.data},addArt(e){this.$refs[e].validate((async t=>{if(!t)return this.$message.error("表单输入有误，请重新输入"),!1;if(this.isEdit){this.cate.id=this.editId;const{data:t}=await(0,r.R4)(this.cate);if(0!==t.code)return this.$message.error(t.message);this.$message.success(t.message),console.log("formName",e),this.$refs[e].resetFields(),console.log("修改文章分类",t)}else{const{data:t}=await(0,r.pP)(this.cate);if(0!==t.code)return this.$message.error(t.message);this.$message.success(t.message),this.$refs[e].resetFields(),console.log("新增文章分类",t)}this.centerDialogVisible=!1,this.getArt()}))},reset(e){this.$refs[e].resetFields()},onAddClosedFn(){this.$refs.addForm.resetFields()},addCateShowDialog(){this.centerDialogVisible=!0,this.isEdit=!1,this.editId=""},edit(e){this.isEdit=!0,this.editId=e.id,this.centerDialogVisible=!0,this.$nextTick((()=>{this.cate.cate_name=e.cate_name,this.cate.cate_alias=e.cate_alias})),console.log(e)},async deleteCate(e){const{data:t}=await(0,r.e8)(e.id);if(0!==t.code)return this.$message.error(t.message);this.$message.success(t.message),this.getArt(),console.log("删除文章分类",t)}},mounted(){this.getArt()}},o=l,c=a(1001),n=(0,c.Z)(o,s,i,!1,null,"25a80ded",null),d=n.exports}}]);
//# sourceMappingURL=367.819921aa.js.map